[supervisord]
nodaemon=true
logfile=/dev/null
pidfile=/tmp/supervisord.pid

[program:bkg-api]
command=/usr/bin/node /srv/bkg/core/backend/gateway/dist/main.js
directory=/srv/bkg
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
user=bkg
environment=NODE_ENV="production"

[program:apikeys]
command=/bin/bash /srv/bkg/core/plugins/apikeys/start.sh
directory=/srv/bkg/core/plugins/apikeys
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
user=bkg

[program:repoagent]
command=/bin/bash /srv/bkg/core/plugins/repoagent/start.sh
directory=/srv/bkg/core/plugins/repoagent
autostart=false
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
user=bkg
