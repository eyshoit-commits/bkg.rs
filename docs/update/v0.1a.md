Perfekt ‚úÖ ‚Äî du willst also **kein separates Dashboard pro Plug-in-App**, sondern **ein gemeinsames AdminUI (Angular)**, in dem **jedes Plug-in** unter einem Men√ºpunkt wie
`/plugins/<plugin-name>`
sein eigenes Dashboard (Status, Logs, Controls, ggf. Modelverwaltung) bekommt.

Das ist elegant und viel wartungsfreundlicher.
Hier kommt dein finaler Architekturplan und der JSON-Blueprint f√ºr Codex AI.

---

## üß† **Zielarchitektur: bkg.rs AdminUI mit Plugin-Dashboards**

### üèóÔ∏è **1. Gesamtidee**

Ein **einziges AdminUI** (Angular 17, Standalone Components, Tailwind).
Die Sidebar zeigt alle verf√ºgbaren Plug-ins an.
Beim Klick auf einen Men√ºpunkt `/plugins/<name>` wird das jeweilige Dashboard des Plug-ins dynamisch geladen.

Beispiel:

```
/core/plugins/brainml
/core/plugins/candle
/core/plugins/rustyface
/core/plugins/llmserver
/core/plugins/repoagent
/core/plugins/apikeys
```

Jedes Dashboard ist ein **eigenes Modul mit Lazy Loading** und nutzt die **gemeinsamen Komponenten** des Frameworks:

* `PluginHeaderComponent` ‚Üí Name, Status, Buttons (Start/Stop/Restart)
* `PluginStatsComponent` ‚Üí CPU, RAM, Model-Info
* `PluginLogsComponent` ‚Üí Echtzeit-Logs √ºber WebSocket
* `PluginConfigComponent` ‚Üí Optionale Settings (z. B. Modelpfade, Ports, Tokens)

---

### ‚öôÔ∏è **2. Backend-Struktur (Rust)**

```
bkg.rs/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ plugin_bus.rs          # RPC + lifecycle management
‚îÇ   ‚îú‚îÄ‚îÄ plugin_registry.rs     # Registrierung + Status
‚îÇ   ‚îî‚îÄ‚îÄ web.rs                 # REST & WebSocket API
‚îú‚îÄ‚îÄ plugins/
‚îÇ   ‚îú‚îÄ‚îÄ brainml/
‚îÇ   ‚îú‚îÄ‚îÄ candle/
‚îÇ   ‚îú‚îÄ‚îÄ rustyface/
‚îÇ   ‚îú‚îÄ‚îÄ llmserver/
‚îÇ   ‚îú‚îÄ‚îÄ repoagent/
‚îÇ   ‚îî‚îÄ‚îÄ apikeys/
```

Jedes Plug-in implementiert das gemeinsame Trait:

```rust
pub trait Plugin {
    fn id(&self) -> &'static str;
    fn start(&self) -> Result<(), PluginError>;
    fn stop(&self) -> Result<(), PluginError>;
    fn status(&self) -> PluginStatus;
    fn routes(&self) -> Vec<Route>;
    fn admin_info(&self) -> PluginAdminInfo;
}
```

API-Beispiel:

```
GET    /api/plugins                ‚Üí Liste aller Plugins + Status
GET    /api/plugins/{id}           ‚Üí Detailstatus
POST   /api/plugins/{id}/start
POST   /api/plugins/{id}/stop
POST   /api/plugins/{id}/restart
GET    /api/plugins/{id}/logs
```

---

### üåê **3. Frontend-Struktur (Angular)**

```
core/frontend/admin-ui/
‚îú‚îÄ‚îÄ src/app/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/plugin-api.service.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ plugin-header.component.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ plugin-stats.component.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ plugin-logs.component.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ plugin-config.component.ts
‚îÇ   ‚îú‚îÄ‚îÄ features/plugins/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ brainml/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ candle/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rustyface/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llmserver/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repoagent/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ apikeys/
‚îÇ   ‚îî‚îÄ‚îÄ app.routes.ts
```

`app.routes.ts`:

```typescript
{
  path: 'plugins',
  loadChildren: () => import('./features/plugins/plugins.routes')
}
```

`plugins.routes.ts`:

```typescript
export const routes: Routes = [
  { path: 'brainml', component: BrainmlDashboardComponent },
  { path: 'candle', component: CandleDashboardComponent },
  { path: 'rustyface', component: RustyFaceDashboardComponent },
  { path: 'llmserver', component: LlmDashboardComponent },
  { path: 'repoagent', component: RepoAgentDashboardComponent },
  { path: 'apikeys', component: ApiKeysDashboardComponent }
];
```

---

### üß© **4. Beispiel eines Plugin-Dashboards (Angular)**

```typescript
@Component({
  selector: 'app-brainml-dashboard',
  standalone: true,
  imports: [PluginHeaderComponent, PluginStatsComponent, PluginLogsComponent],
  template: `
    <div class="space-y-4">
      <app-plugin-header [pluginId]="'brainml'"></app-plugin-header>
      <app-plugin-stats [pluginId]="'brainml'"></app-plugin-stats>
      <app-plugin-logs [pluginId]="'brainml'"></app-plugin-logs>
    </div>
  `
})
export class BrainmlDashboardComponent {}
```

---

### üì¶ **5. JSON f√ºr Codex AI**

```json
{
  "task": "adminui_plugin_dashboards",
  "timestamp": "2025-10-21T06:30:00Z",
  "author": "lofmas",
  "description": "Einheitliches Angular-AdminUI f√ºr bkg.rs mit Plugin-Men√º und individuellen Dashboards pro Plugin.",
  "frontend": {
    "framework": "Angular 17",
    "navigation": "/plugins/<plugin-name>",
    "features": [
      "Dynamische Plugin-Liste",
      "Lazy Loading pro Plugin",
      "Hot-Swap Controls (Start/Stop/Restart)",
      "Echtzeit-Logs √ºber WebSocket",
      "Status- und Telemetrieanzeige"
    ],
    "shared_components": [
      "PluginHeaderComponent",
      "PluginStatsComponent",
      "PluginLogsComponent",
      "PluginConfigComponent"
    ]
  },
  "backend": {
    "registry": "plugin_registry.rs",
    "api_routes": [
      "/api/plugins",
      "/api/plugins/{id}",
      "/api/plugins/{id}/start|stop|restart",
      "/api/plugins/{id}/logs"
    ]
  },
  "plugins": [
    "brainml",
    "candle",
    "rustyface",
    "llmserver",
    "repoagent",
    "apikeys"
  ],
  "goals": [
    "Einheitliche AdminUI",
    "Modularit√§t √ºber Plug-in-Tabs",
    "Hot-Swap Management",
    "Erweiterbar f√ºr neue Plugins"
  ]
}
```

---

M√∂chtest du, dass ich dir **den konkreten Ordnerbaum + Angular-Routing-Setup** (mit `app.routes.ts`, `plugins.routes.ts` und Beispiel-Komponenten) als Code-Vorlage schreibe, damit du es direkt in dein Projekt kopieren kannst?

---

## üìù Git Commit-Strategie

Siehe auch: **[../GIT_REDESIGN.md](../GIT_REDESIGN.md)**

Das v0.2 Redesign wird in **14 Commits** √ºber **4 Phasen** implementiert:

### Phase 1: Foundation (4 Commits)
- fix(build): Proxy-Konfiguration reparieren
- feat(core): Plugin Registry implementieren
- feat(plugins): Candle-Plugin initialisieren
- feat(plugins): RustyFace-Plugin initialisieren

### Phase 2: Frontend (5 Commits)
- feat(frontend): AdminUI Scaffolding
- feat(admin-ui): Services & Models
- feat(admin-ui): Shared Components
- feat(admin-ui): Plugin Dashboards
- feat(admin-ui): WebSocket Integration

### Phase 3: Backend (3 Commits)
- feat(api): Plugin Management Endpoints
- feat(api): WebSocket Gateway
- test(integration): End-to-End Tests

### Phase 4: Release (2 Commits)
- docs: Dokumentation aktualisieren
- release: v0.2.0 Tag & Deploy

**Siehe**: [../GIT_REDESIGN.md](../GIT_REDESIGN.md) f√ºr vollst√§ndige Commit-Struktur, Branch-Strategie und Git-Log-Beispiele.
